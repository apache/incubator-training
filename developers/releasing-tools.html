

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
 Generated by Apache Maven Doxia
 Rendered using Reflow Maven Skin 1.5.0 (http://devacfr.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">
          
        <head>
    <meta charset="UTF-8" />
    <title>Apache Training™ (Incubating) - Releasing the tools</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
      <meta http-equiv="content-language" content="en" />
                                                                <link href="../css/bootstrap.min.css" rel="stylesheet" />
                <link href="../css/docs.css" rel="stylesheet" />
    <link href="../css/reflow-skin.css" rel="stylesheet" />

    <link rel="stylesheet" href="../js/styles/default.min.css" />

    <link href="../css/lightbox.css" rel="stylesheet" />
    <link href="../css/site.css" rel="stylesheet" />
    <link href="../css/print.css" rel="stylesheet" media="print" />
<script>
          document.addEventListener("DOMContentLoaded", function(event) {
            /* Add an image for promoting Apache events below the right banner */
            $("#bannerRight").append('<p id="apacheEvents"><a href="//www.apache.org/events/current-event.html"><img src="//www.apache.org/events/current-event-234x60.png"/></a></p>');
            /* Append the trademarks info to the copyright section */
            $(".copyright").append('<p>Apache Training, Apache, the Apache feather logo, and the Apache Training project logo are either registered trademarks or trademarks of The Apache Software Foundation in the United States and other countries. All other marks mentioned may be trademarks or registered trademarks of their respective owners.</p>');
          });
        </script>
        </head> <!-- end : head -->
    <body class="page-developers-releasing-tools project-training-website">

    <div id="m-top-navbar" class="navbar  navbar-default navbar-fixed-top">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target="#top-navbar-collapse-1" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    </button>
                        <a class="navbar-brand" href="..">Apache Training (Incubating)</a>
        </div> <!-- .navbar-header -->
        <div class="collapse navbar-collapse" id="top-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Users <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li ><a  href="../downloads.html"  title="Downloads" >Downloads</a></li>
                    <li ><a  href="../users/index.html"  title="Getting Started" >Getting Started</a></li>
            </ul>
        </li>
                            <li class="dropdown active">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developers <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li ><a  href="issues.html"  title="Bug & Issue Tracker" >Bug & Issue Tracker</a></li>
                    <li ><a  href="building-website.html"  title="Building Training Website" >Building Training Website</a></li>
                    <li ><a  href="ci.html"  title="Continuous Integration" >Continuous Integration</a></li>
                    <li ><a  href="contributing.html"  title="Contributing" >Contributing</a></li>
                    <li ><a  href="decisions.html"  title="Decision Making" >Decision Making</a></li>
                                    <li  class="active" ><a  href=""  title="Releasing (tools)" >Releasing (tools)</a></li>
                    <li ><a  href="team.html"  title="Team" >Team</a></li>
                    <li ><a  href="website.html"  title="Website" >Website</a></li>
                    <li ><a  href="wiki.html"  title="Wiki" >Wiki</a></li>
            </ul>
        </li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Apache <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li ><a  href="http://www.apache.org"  title="Apache Software Foundation"  class="externalLink" >Apache Software Foundation</a></li>
                    <li ><a  href="https://www.apache.org/foundation/how-it-works.html"  title="How Apache Works"  class="externalLink" >How Apache Works</a></li>
                    <li ><a  href="http://www.apache.org/licenses"  title="License"  class="externalLink" >License</a></li>
                    <li ><a  href="http://www.apache.org/foundation/sponsorship.html"  title="Sponsoring Apache"  class="externalLink" >Sponsoring Apache</a></li>
                    <li ><a  href="http://www.apache.org/foundation/thanks.html"  title="Thanks"  class="externalLink" >Thanks</a></li>
            </ul>
        </li>
            </ul>
        </div><!--/.nav-collapse -->
      </div> <!--/.container -->
    </div> <!--/.navbar -->
  <div class="container">
  <!-- Masthead -->
  <!-- ================================================== -->  <div class="header container-fluid">
  <div class="jumbotron subhead">
    <div class="row" id="banner">
      <div class="col-md-12">
        <div class="pull-left">
                                      <a href="https://training.apache.org/" id="bannerLeft">
                    <img src="../images/training-logo.svg"
                 alt='"'Apache Training (incubating)'"'
 />            </a>
                    <p class="lead">Training material for Apache projects</p>
        </div>
        <div class="pull-right">
                                      <a href="http://incubator.apache.org/" id="bannerRight">
                    <img src="https://incubator.apache.org/images/incubator_feather_egg_logo_sm.png"
                 alt='"'Apache Incubator'"'
 />            </a>
        </div>
      </div>
    </div>
  </div>
    <hr class="toc-separator" />
    <div id="toc-bar" class="navbar navbar-default">
      <div id="toc-scroll-target" class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#toc-nav-collapse" aria-expanded="false">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
            </div> <!-- .navbar-header -->
        <div class="collapse navbar-collapse" id="toc-nav-collapse">
          <ul id="toc" class="nav navbar-nav">
                                                            <li class="toplevel"><a href="#_toc_releasing_the_tools1" title="Releasing the tools">Releasing the tools</a></li>
                        <li class="toplevel"><a href="#_toc_creating_a_release_branch1" title="Creating a release branch">Creating a release branch</a></li>
                        <li class="toplevel"><a href="#_toc_doing_the_release1" title="Doing the release">Doing the release</a></li>
                        <li class="toplevel"><a href="#_toc_staging_the_release_candidate1" title="Staging the Release Candidate">Staging the Release Candidate</a></li>
                        <li class="toplevel"><a href="#_toc_sending_out_the_vote_email1" title="Sending out the VOTE email">Sending out the VOTE email</a></li>
          </ul>
        </div>
      </div> <!-- .container -->
    </div> <!-- end: toc-bar -->
  </div> <!-- end : header -->
  <div class="main-body">

  <div class="row">
    <div class="col-md-12">
      <div class="body-content">
<div class="sect1"> 
 <div class="page-header">
  <h2 id="_toc_releasing_the_tools1">Releasing the tools</h2>
 </div> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>The tools contain all the parts we need to actually build our presentations.</p> 
  </div> 
  <div class="paragraph"> 
   <p>They currently consist of 3 parts:</p> 
  </div> 
  <div class="olist arabic"> 
   <ol class="arabic"> 
    <li> <p>The <code>content-parent-resources</code> which contain all the static resources we need to build the presentations.</p> </li> 
    <li> <p>The <code>content-parent-pom</code> which is pom, when used as parent for a presentation, will make sure all is configured correcty, dramatically reducing the amount of configuration needed.</p> </li> 
    <li> <p>The <code>content-archetype</code> which is a maven archetype which can be used to generate a new presentation module based on the current <code>content-parent-pom</code>.</p> </li> 
   </ol> 
  </div> 
  <div class="paragraph"> 
   <p>As the parts listed later on in this module listing require the previous ones in the build, we can’t release them all in one go, but have to release them one after the other.</p> 
  </div> 
  <div class="paragraph"> 
   <p>This makes releasing this a little trickier, but in the end it’s a lot simpler for our users.</p> 
  </div> 
  <div class="sect2"> 
   <h3 id="_toc_creating_a_release_branch1">Creating a release branch</h3> 
   <div class="paragraph"> 
    <p>First we need to create a release branch.</p> 
   </div> 
   <div class="paragraph"> 
    <p>Do this the following way:</p> 
   </div> 
   <div class="literalblock"> 
    <div class="content"> 
     <pre>mvn release:branch -DbranchName=releases/tools/1.0</pre> 
    </div> 
   </div> 
   <div class="admonitionblock note"> 
    <table> 
     <tbody> 
      <tr> 
       <td class="icon"> 
        <div class="title">
          Note 
        </div> </td> 
       <td class="content"> We’re not using the full version here, as this branch should also contain the bugfix releases and the tags will have the name using the full version. If we used that for the branch itself we would get name collisions during the release. </td> 
      </tr> 
     </tbody> 
    </table> 
   </div> 
   <div class="paragraph"> 
    <p>After this command is done, we will still be on the <code>develop</code> branch. In order to actually start the release, we need to switch to the release branch which was previously created.</p> 
   </div> 
   <div class="literalblock"> 
    <div class="content"> 
     <pre>git checkout releases/tools/1.0</pre> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="_toc_doing_the_release1">Doing the release</h3> 
   <div class="paragraph"> 
    <p>The release itself is done via the <code>maven-release-plugin</code>.</p> 
   </div> 
   <div class="literalblock"> 
    <div class="content"> 
     <pre>mvn release:prepare</pre> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>The plugin will ask some questions.</p> 
   </div> 
   <div class="ulist"> 
    <ul> 
     <li> <p>For the new-release version, just hit <code>[Enter]</code> and use the default.</p> </li> 
     <li> <p>For the release tag use: releases/tools/1.0.0 (Or the version used in the question before)</p> </li> 
     <li> <p>For the next development version, again just hit <code>[Enter]</code> and use the default.</p> </li> 
    </ul> 
   </div> 
   <div class="paragraph"> 
    <p>The plugin will now:</p> 
   </div> 
   <div class="ulist"> 
    <ul> 
     <li> <p>Check if there are any uncommitted files in the release and abort if it finds any.</p> </li> 
     <li> <p>Then it will update the versions of all artifacts in the reactor to the release version.</p> </li> 
     <li> <p>Then check if now any SNAPSHOT version is used and ask to resolve them to release versions if it finds any (If it finds any, this should be addressed as it should not happen)</p> </li> 
     <li> <p>Then it does a build including tests in order to see if it builds with the new version.</p> </li> 
     <li> <p>If this build is ok, it commits the changed poms with the new versions.</p> </li> 
     <li> <p>Then it tags this version</p> </li> 
     <li> <p>Then it changes the versions to the next version</p> </li> 
     <li> <p>Then it commits these changes too</p> </li> 
     <li> <p>Then it pushes the changes</p> </li> 
    </ul> 
   </div> 
   <div class="paragraph"> 
    <p>The next step now uses the release tag created in the previous step and builds the release artifacts.</p> 
   </div> 
   <div class="literalblock"> 
    <div class="content"> 
     <pre>mvn release:perform</pre> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>This now will:</p> 
   </div> 
   <div class="ulist"> 
    <ul> 
     <li> <p>Checkout the tag into the "target/checkout" directory</p> </li> 
     <li> <p>Run a <code>mvn deploy</code> build in this clean checkout with enabled <code>apache-release</code> profile</p> </li> 
     <li> <p>In this build - due to the <code>apache-release</code> profile - will also build <code>source</code> jars, <code>javadoc</code> jars, create a source distribution</p> </li> 
     <li> <p>Create md5 hashes for all artifacts</p> </li> 
     <li> <p>Sign all artifacts with your GPG Keys</p> </li> 
     <li> <p>Deploy everything to the <code>Apache Nexus</code> Staging repository</p> </li> 
    </ul> 
   </div> 
   <div class="paragraph"> 
    <p>Last thing you need to do after a successful execution of the release:perform step, is:</p> 
   </div> 
   <div class="ulist"> 
    <ul> 
     <li> <p>To log in to Apache’s Nexus at: <a href="https://repository.apache.org/#welcome" class="bare">https://repository.apache.org/#welcome</a> (using your apache credentials)</p> </li> 
     <li> <p>Select <code>Staging Repositories</code> in the <code>Build Promotion</code> menu on the left-hand side (If you can’t see it, you’ve probably not logged in)</p> </li> 
     <li> <p>Use the search box of the <code>Staging Repositories</code> tab and search for "training" (It will probably have only one)</p> </li> 
     <li> <p>Select the entry.</p> </li> 
     <li> <p>Click on the <code>Close</code> button.</p> </li> 
     <li> <p>Enter a meaningful message and click <code>Confirm</code></p> </li> 
     <li> <p>Hit the <code>Refresh</code> button in the tab untill the column <code>Status</code> changes from <code>open</code> to <code>closed</code></p> </li> 
     <li> <p>Copy the <code>URL</code> displayed in the details tab for the selected staging repo (In my case: <a href="https://repository.apache.org/content/repositories/orgapachetraining-1000" class="bare">https://repository.apache.org/content/repositories/orgapachetraining-1000</a>)</p> </li> 
    </ul> 
   </div> 
   <div class="paragraph"> 
    <p>We’re now done with the preparation of the RC from a Maven perspective.</p> 
   </div> 
   <div class="paragraph"> 
    <p>Next we need to stage the source bundle we will be voting on.</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="_toc_staging_the_release_candidate1">Staging the Release Candidate</h3> 
   <div class="paragraph"> 
    <p>What we’ve staged in Nexus is the <code>convenience binaries</code> part of the release, the official release will be the source bundle located in SVN.</p> 
   </div> 
   <div class="paragraph"> 
    <p>These will be located under: <a href="https://dist.apache.org/repos/dist/dev/incubator/training/" class="bare">https://dist.apache.org/repos/dist/dev/incubator/training/</a></p> 
   </div> 
   <div class="paragraph"> 
    <p>In our case the tools will be located in a sub-directory <code>tools</code>, so the final path to the <code>RC1</code> of version <code>1.0.0</code> will be: <a href="https://dist.apache.org/repos/dist/dev/incubator/training/tools/1.0.0/rc1" class="bare">https://dist.apache.org/repos/dist/dev/incubator/training/tools/1.0.0/rc1</a></p> 
   </div> 
   <div class="paragraph"> 
    <p>I usually prepare a local directory containing all parts and then just import them into SVN in one go.</p> 
   </div> 
   <div class="paragraph"> 
    <p>The local structure for this is then:</p> 
   </div> 
   <div class="literalblock"> 
    <div class="content"> 
     <pre>/tools/1.0.0/rc1/training-tools-1.0.0-source-release.zip
/tools/1.0.0/rc1/training-tools-1.0.0-source-release.zip.asc
/tools/1.0.0/rc1/training-tools-1.0.0-source-release.zip.sha512</pre> 
    </div> 
   </div> 
   <div class="admonitionblock note"> 
    <table> 
     <tbody> 
      <tr> 
       <td class="icon"> 
        <div class="title">
          Note 
        </div> </td> 
       <td class="content"> Be sure to not take the files form the <code>target</code> directory directly, but that you use the <code>target/checkout/tools/target</code> versions instead! </td> 
      </tr> 
     </tbody> 
    </table> 
   </div> 
   <div class="paragraph"> 
    <p>Then I just import the 1.0.0 directory using the following command</p> 
   </div> 
   <div class="literalblock"> 
    <div class="content"> 
     <pre>svn import tools/1.0.0 https://dist.apache.org/repos/dist/dev/incubator/training/tools/1.0.0 -m"Staged RC1 of version 1.0.0 Apache Training tools"</pre> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>If this is the first time you are releasing something for the Apache Training (incubating) project, be sure to add your PGP key to the <code>KEYS</code> file at: <a href="https://dist.apache.org/repos/dist/dev/incubator/training/KEYS" class="bare">https://dist.apache.org/repos/dist/dev/incubator/training/KEYS</a></p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="_toc_sending_out_the_vote_email1">Sending out the VOTE email</h3> 
   <div class="paragraph"> 
    <p>Next step is to actually start the vote by sending out the VOTE email.</p> 
   </div> 
   <div class="paragraph"> 
    <p>Here a template for that:</p> 
   </div> 
  </div> 
 </div> 
</div>      </div>
    </div>
  </div> <!-- /row -->
  </div>
    </div> <!-- end : row -->
</div> <!-- /container -->
  <!-- Footer
  ================================================== -->
  <footer class="well">
    <div class="container">
      <div class="row">
            <div class="col-md-3 bottom-nav">

                <ul class="nav nav-list">
                    <li class="nav-header">Apache</li>
                    <li ><a  href="http://www.apache.org"  title="Apache Software Foundation"  class="externalLink" >Apache Software Foundation</a></li>
                    <li ><a  href="https://www.apache.org/foundation/how-it-works.html"  title="How Apache Works"  class="externalLink" >How Apache Works</a></li>
                    <li ><a  href="http://www.apache.org/licenses"  title="License"  class="externalLink" >License</a></li>
                    <li ><a  href="http://www.apache.org/foundation/sponsorship.html"  title="Sponsoring Apache"  class="externalLink" >Sponsoring Apache</a></li>
                    <li ><a  href="http://www.apache.org/foundation/thanks.html"  title="Thanks"  class="externalLink" >Thanks</a></li>
                </ul>

            </div>
            <div class="col-md-3 bottom-nav">

                <ul class="nav nav-list">
                </ul>

            </div>
        <div class="col-md-6 bottom-description">
          <blockquote><p id="bottomNote" style="font-size: 15px">
          Apache Training is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.
          </p></blockquote>
        </div>
      </div>
    </div>
  </footer>
  <div class="container subfooter">
    <div class="row">
      <div class="col-md-12">
        <p class="pull-right"><a id="m-scroll-top" href="#">Back to top</a></p>
        <p class="copyright">Copyright &copy;2019-2022                 <a href="https://www.apache.org/">The Apache Software Foundation</a>
. All Rights Reserved.</p>
        <p><a href="https://github.com/devacfr/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://devacfr.github.io" target="_blank" title="devacfr">devacfr</a>.</p>

      </div>
    </div>
  </div>
  <!-- Le javascript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
    <script src="../js/jquery.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>

  <script src="../js/lightbox.min.js"></script>

  <script src="../js/reflow-scroll.js"></script>
	<script src="../js/highlight.min.js"></script>
  <script src="../js/reflow-skin.js"></script>
    <script src="../js/anchor.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function(event) {
            anchors.options = {
              placement: 'left',
            };
            anchors.add('h1,h2, h3, h4, h5, h6');
        });
    </script>

  </body>
</html>